<script>
  var oldtoc = document.getElementById('toctitle').nextElementSibling;
  var newtoc = document.createElement('div');
  newtoc.setAttribute('id', 'tocbot');
  newtoc.setAttribute('class', 'js-toc');
  oldtoc.parentNode.replaceChild(newtoc, oldtoc);
  tocbot.init({ contentSelector: '#content',
                orderedList: false,
                headingSelector: 'h1, h2, h3, h4, h5',
                smoothScroll: false });
  var handleTocOnResize = function() {
      var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
      if (width < 768) {
          tocbot.refresh({ contentSelector: '#content',
                           headingSelector: 'h1, h2, h3, h4, h5',
                           collapseDepth: 6,
                           orderedList: false,
                           activeLinkClass: 'ignoreactive',
                           throttleTimeout: 1000,
                           smoothScroll: false });
        }
      else {
          tocbot.refresh({ contentSelector: '#content',
                           headingSelector: 'h1, h2, h3, h4, h5',
                           orderedList: false,
                           smoothScroll: false });
      }
  };
  window.addEventListener('resize', handleTocOnResize);
  handleTocOnResize();
</script>
